<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>acts_as_taggable_on gem have issue with after_save callback</title>
  <meta name="author" content="Abhilash M A" />

  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax-highlight.css" type="text/css" />
  
  <!-- Homepage CSS -->
  <link rel="stylesheet" href="/css/screen-projection.css" type="text/css" media="screen, projection" />
  
  <link rel="stylesheet" href="/css/application.css" type="text/css" />

  <link rel="icon" type="image/ico" href="/ruby-icon.ico" />
   <!--[if lte IE 8]>
   <script type="text/javascript">
     // Create elements here allows IE8 to style them when it sees the real thing.
     document.createElement('article');
     document.createElement('aside');
     document.createElement('footer');
     document.createElement('header');
     document.createElement('hgroup');
     document.createElement('menu');
     document.createElement('nav');
     document.createElement('section');
   </script>
   <![endif]-->
   <script type="text/javascript">var
     switchTo5x=true;
   </script>
   <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js">
   </script>
   <script type="text/javascript">stLight.options({publisher:'21abf337-23b8-4364-b61a-87c7c2e65d83'});</script>
</head>
<body>

<div class="site">
  <div class="posts left-section">
    <div class="title">
      <h1><a href="/">Abhi On Rails</a></h1>
      <div class="title-desc">Ruby On Rails - What I learned recently</div>
    </div>
    
    

<article>
<header>
  <time datetime="2011-10-07" pubdate="pubdate" class="post-date">
    Oct 07, 2011
  </time>
  <h1><a href="/ruby/gem/issue/callback/rails/after_save/acts_as_taggable_on/gem/2011/10/07/acts_as_taggable_on-gem-have-issue-with-after_save-callback/">acts_as_taggable_on gem have issue with after_save callback</a></h1>
</header>

<div dir="ltr" style="text-align: left;" trbidi="on">Today I had spent a lot of time fixing an after_save callback issue related with <a href="https://github.com/mbleigh/acts-as-taggable-on">acts_as_taggable_on</a> gem. We're associating keyword tag to a model using the following command:<br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><b>acts_as_taggable_on :keywords</b></span><br /><br />And we've a after_save call back in that model which uses the updated keywords. But the issue was in the callback, if you reload the object you will lose the new keywords associated with it, because the keywords are not yet saved.<br /><div><br />Then I Googled about this issue and found the following blog which helped me to solve the issue:</div><div><a href="http://blog.romanandreg.com/post/176944361/activerecord-callbacks-acts-as-taggable-gotcha">http://blog.romanandreg.com/post/176944361/activerecord-callbacks-acts-as-taggable-gotcha</a></div><div>I tried with the <b>update_tags</b> mentioned in the blog, but with the latest acts_as_taggable_on gem this fix is not working. Then I gone through the code of <a href="https://github.com/mbleigh/acts-as-taggable-on">acts_as_taggable_on</a> gem, and in core.rb I found the following line:</div><div><span class="Apple-style-span" style="background-color: white; line-height: 16px; white-space: pre;"><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><b><span class="n" style="margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;">after_save</span> <span class="ss" style="color: #990073; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px;">:save_tags</span></b></span></span>&nbsp;</div><div><br />Then I tried calling <b>save_tags</b> from my callback method. Thats it!</div><div>It got fixed!!</div></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/7585462888260154580-4500628703503484258?l=abhionrails.blogspot.com' alt='' /></div>

<div class="share-this">
<span  class='st_email_hcount' displayText='Email' st_url="http://abhidsm.github.com/ruby/gem/issue/callback/rails/after_save/acts_as_taggable_on/gem/2011/10/07/acts_as_taggable_on-gem-have-issue-with-after_save-callback/" st_title="acts_as_taggable_on gem have issue with after_save callback"></span>
<span  class='st_twitter_hcount' displayText='Tweet' st_url="http://abhidsm.github.com/ruby/gem/issue/callback/rails/after_save/acts_as_taggable_on/gem/2011/10/07/acts_as_taggable_on-gem-have-issue-with-after_save-callback/" st_title="acts_as_taggable_on gem have issue with after_save callback #abhidsm"></span>
<span  class='st_facebook_hcount' displayText='Facebook' st_url="http://abhidsm.github.com/ruby/gem/issue/callback/rails/after_save/acts_as_taggable_on/gem/2011/10/07/acts_as_taggable_on-gem-have-issue-with-after_save-callback/" st_title="acts_as_taggable_on gem have issue with after_save callback"></span>
<span  class='st_fblike_hcount' st_url="http://abhidsm.github.com/\/ruby/gem/issue/callback/rails/after_save/acts_as_taggable_on/gem/2011/10/07/acts_as_taggable_on-gem-have-issue-with-after_save-callback/" st_title="acts_as_taggable_on gem have issue with after_save callback"></span>
<span  class='st_plusone_hcount' st_url="http://abhidsm.github.com/ruby/gem/issue/callback/rails/after_save/acts_as_taggable_on/gem/2011/10/07/acts_as_taggable_on-gem-have-issue-with-after_save-callback/" st_title="acts_as_taggable_on gem have issue with after_save callback"></span>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'abhidsm'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class="post-nav">
  
  <div class="post-newer">
    <a class="small" href="/ruby/gem/named/scope/Geokit/order/by/distance/rails/sort/by/distance/distance_sql/chain/named/scope/2011/11/02/Write-a-named-scope-to-fetch-the-data-sorted-by-distance-using-Geokit/">Write a named scope to fetc... &rarr;</a>
  </div>
  
  
  <div class="post-older">
    <a class="small" href="/ruby/gem/time/difference/gem/time/difference/time_diff/gem/2011/04/10/Updated-time_diff-gem/">&larr; Updated time_diff gem</a>
  </div>
  
  <hr />
</div>

</article>




    
    <div class="footer">
      <div class="contact">
        <p>
          Abhilash M A<br />
        abhidsm@gmail.com
        </p>
      </div>
      <div class="contact">
        <p>
          <a href="http://github.com/abhidsm/">github.com/abhidsm</a><br />
        <a href="http://twitter.com/abhidsm/">twitter.com/abhidsm</a><br />
        </p>
      </div>
      <div class="copy-right">
        Copyright Â© 2011 Abhilash M A. Powered by <a target="_new"
        href="http://github.com/mojombo/jekyll">Jekyll</a>
        and <a target="_new" href="http://github.com">Github</a>.
      </div>
    </div>
  </div>
  <div class="right-section">
    <div class="home margin-top-10"><a href="/">Home</a></div>
    <div class="archive margin-top-10"><a href="/archive">Archive</a></div>
    <div class="about margin-top-10"><a target="_new" href="http://about.me/abhidsm">About</a></div>
    <div class="working-with-rails-badge margin-top-10">
      <a href="http://www.workingwithrails.com/recommendation/new/person/20833-abhilash-m-a"><img alt="Recommend Me" src="http://workingwithrails.com/images/tools/compact-med.jpg" /></a>
    </div>
<!--    <div class="work margin-top-10"> 
      <ul>Working At
        <li><a target="_new" href="http://www.multunus.com">Multunus Software Pvt. Ltd.</a></li>
      </ul>
    </div> -->
    <div class="one-more-blog margin-top-10"> 
      <ul>I have one more blog
        <li><a target="_new" href="http://abhidsm.com">Abhi's Experiments</a></li>
      </ul>
    </div>
    <div class="spare-time-apps margin-top-10"> 
      <ul>My Spare-Time Apps
        <li><a target="_new" href="http://flamesgame.appspot.com">Flames Game</a></li>
        <li><a target="_new" href="http://justchat.nodester.com">Just Chat</a></li>
      </ul>
    </div>
    <div class="friends margin-top-10"> 
      <ul>Blogs of my Friends
        <li><a target="_new" href="http://foobarnbaz.com/">Sreejith K</a></li>
        <li><a target="_new" href="http://manuknkra.wordpress.com/">Manu K Mohan</a></li>
      </ul>
    </div>
    <div class="following margin-top-10"> 
      <ul>I am following the following:
        <li><a target="_new" href="http://news.ycombinator.com/">Hacker News</a></li>
        <li><a target="_new" href="http://techcrunch.com/">Tech Crunch</a></li>
        <li><a target="_new" href="http://www.techmeme.com/">Tech Meme</a></li>
      </ul>
    </div>
  </div>
</div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'abhidsm'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>
