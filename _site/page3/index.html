<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Abhi On Rails</title>
  <meta name="author" content="Abhilash M A" />

  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax-highlight.css" type="text/css" />
  
  <!-- Homepage CSS -->
  <link rel="stylesheet" href="/css/screen-projection.css" type="text/css" media="screen, projection" />
  
  <link rel="stylesheet" href="/css/application.css" type="text/css" />

  <link rel="icon" type="image/ico" href="/ruby-icon.ico" />
   <!--[if lte IE 8]>
   <script type="text/javascript">
     // Create elements here allows IE8 to style them when it sees the real thing.
     document.createElement('article');
     document.createElement('aside');
     document.createElement('footer');
     document.createElement('header');
     document.createElement('hgroup');
     document.createElement('menu');
     document.createElement('nav');
     document.createElement('section');
   </script>
   <![endif]-->
   <script type="text/javascript">var
     switchTo5x=true;
   </script>
   <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js">
   </script>
   <script type="text/javascript">stLight.options({publisher:'21abf337-23b8-4364-b61a-87c7c2e65d83'});</script>
</head>
<body>

<div class="site">
  <div class="posts left-section">
    <div class="title">
      <h1><a href="/">Abhi On Rails</a></h1>
      <div class="title-desc">Ruby On Rails - What I learned recently</div>
    </div>
    
    
<article class="excerpt">
<header>
<time datetime="2011-03-06" pubdate="pubdate" class="post-date">
Mar 06, 2011
</time>
<h1><a href="/State/Machine/plugin/rails/2011/03/06/State-Machine/">State Machine</a></h1>
</header>

<div dir="ltr" style="text-align: left;" trbidi="on">In some application we need to track the state of a model. For example, a user requested for signup. Admin has to approve the user for the user to login. Admin has the option to reject the user also. So the status of the user model will be in one of the following states [pending, approved, rejected].<br /><br />The famous plugin used for tracking the state is <a href="https://github.com/rubyist/aasm">aasm</a>. You can install Acts as state machine using:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">sudo gem install aasm</span><br /><br />Then in the user model you have to include the plugin<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">include AASM</span><br /><br />Then specify which field you want to use as the state.<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">aasm_column :status</span><br /><br />Now you can write the states of the model:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">aasm_state :pending&nbsp;</span><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">aasm_state :approved&nbsp;</span><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">aasm_state :rejected</span><br /><br />You can set initial state using:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">aasm_initial_state :pending</span><br /><br />Now we need the events to change the state:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">aasm_event :approve do</span><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;transitions :to =&gt; :approved, :from =&gt; [:pending]</span><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">end</span><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;"><br /></span><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">aasm_event :reject do</span><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">&nbsp;&nbsp;transitions :to =&gt; :rejected, :from =&gt; [:pending]</span><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">end</span><br /><br />This is all we need in model.<br /><br />Now to change the state of the model object you can use:<br /><br /><span class="Apple-style-span" style="font-family: 'Courier New', Courier, monospace;"><span class="Apple-style-span" style="color: #990000;">user.approve!</span> </span>&nbsp;#To approve the user<br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">user.reject!</span> &nbsp; &nbsp; &nbsp;#To reject the user<br /><br />If you want to do something while the state of the model is change from one state to another you can call the method at the time of state change using:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">aasm :approved, :enter =&gt; entered_to_apporoved, :exit =&gt; exit_from_approved</span><br /><br />At the time of state definition you can specify the enter method and exit method to call.<br /><br /><br /></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/7585462888260154580-4582293218607317697?l=abhionrails.blogspot.com' alt='' /></div>
<div class="share-this">
<span  class='st_email_hcount' displayText='Email' st_url="http://abhidsm.github.com/State/Machine/plugin/rails/2011/03/06/State-Machine/" st_title="State Machine"></span>
<span  class='st_twitter_hcount' displayText='Tweet' st_url="http://abhidsm.github.com/State/Machine/plugin/rails/2011/03/06/State-Machine/" st_title="State Machine #abhidsm"></span>
<span  class='st_facebook_hcount' displayText='Facebook' st_url="http://abhidsm.github.com/State/Machine/plugin/rails/2011/03/06/State-Machine/" st_title="State Machine"></span>
<span  class='st_fblike_hcount' st_url="http://abhidsm.github.com/\/State/Machine/plugin/rails/2011/03/06/State-Machine/" st_title="State Machine"></span>
<span  class='st_plusone_hcount' st_url="http://abhidsm.github.com/State/Machine/plugin/rails/2011/03/06/State-Machine/" st_title="State Machine"></span>
</div>

<p class="full-post"><a class="small" href="/State/Machine/plugin/rails/2011/03/06/State-Machine/#disqus_thread">comments...</a></p>
</article>
<div class="separator">
<image src="/images/blog-post-separator.png" />
</div>

<article class="excerpt">
<header>
<time datetime="2011-02-06" pubdate="pubdate" class="post-date">
Feb 06, 2011
</time>
<h1><a href="/platform/as/a/service/rails/heroku/free/domain/2011/02/06/Heroku/">Heroku</a></h1>
</header>

<div dir="ltr" style="text-align: left;" trbidi="on">Heroku is a PAAS (Platform As A Service) for Ruby on Rails. You will get a free domain with limited support for your Rails App. After signup to Heroku, you can install the gem:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">gem install heroku</span><br /><br />Then you can start your application with create command:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">heroku create yourapp</span><br /><br />Using git commands you can deploy this app to the Heroku:<br /><br />git add, git commit,<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">git push heroku master</span><br /><br />This will deploy to your heroku repository, git @heroku.com:yourapp.git<br />And your URL will be, http://yourapp.heroku.com<br /><br />To do the db:migrate run the command:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">heroku rake db:migrate</span><br /><br />For more details visit <a href="http://heroku.com/">Heroku</a><br /><br /></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/7585462888260154580-637410503858490785?l=abhionrails.blogspot.com' alt='' /></div>
<div class="share-this">
<span  class='st_email_hcount' displayText='Email' st_url="http://abhidsm.github.com/platform/as/a/service/rails/heroku/free/domain/2011/02/06/Heroku/" st_title="Heroku"></span>
<span  class='st_twitter_hcount' displayText='Tweet' st_url="http://abhidsm.github.com/platform/as/a/service/rails/heroku/free/domain/2011/02/06/Heroku/" st_title="Heroku #abhidsm"></span>
<span  class='st_facebook_hcount' displayText='Facebook' st_url="http://abhidsm.github.com/platform/as/a/service/rails/heroku/free/domain/2011/02/06/Heroku/" st_title="Heroku"></span>
<span  class='st_fblike_hcount' st_url="http://abhidsm.github.com/\/platform/as/a/service/rails/heroku/free/domain/2011/02/06/Heroku/" st_title="Heroku"></span>
<span  class='st_plusone_hcount' st_url="http://abhidsm.github.com/platform/as/a/service/rails/heroku/free/domain/2011/02/06/Heroku/" st_title="Heroku"></span>
</div>

<p class="full-post"><a class="small" href="/platform/as/a/service/rails/heroku/free/domain/2011/02/06/Heroku/#disqus_thread">comments...</a></p>
</article>
<div class="separator">
<image src="/images/blog-post-separator.png" />
</div>

<article class="excerpt">
<header>
<time datetime="2011-02-04" pubdate="pubdate" class="post-date">
Feb 04, 2011
</time>
<h1><a href="/performance/multiple/page/will_paginate/rails/pagination/2011/02/04/Pagination/">Pagination</a></h1>
</header>

<div dir="ltr" style="text-align: left;" trbidi="on">If you have a web page with a list of data more than a screen height, it won't be look good. The user have to scroll down to see the data, and mostly it will affect the performance of your website. If there are 100 rows of data in a list, we will fetch all the data to show in the list. But if we are using pagination we can limit the number of data to fetch, for example if we need to show only 10 rows of data per page we only need to fetch 10 records, not the entire data.<br /><br />There is a gem called <a href="https://github.com/mislav/will_paginate/wiki/">will_paginate</a>&nbsp;which do all we need to do for a pagination in our rails web app. All you need to do is install the gem:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">gem install will_paginate</span><br /><br />Then when you are accessing model for data, use the paginate along with that:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">@data = Data.paginate :page =&gt; params[:page]</span><br /><br />Here params[:page] is the page number we need to fetch. This will come from the view because we will add some helper method in the view to show the page links:<br /><br /><span class="Apple-style-span" style="color: #990000; font-family: 'Courier New', Courier, monospace;">&lt;%= will_paginate @data %&gt;</span><br /><br />This code you can put it in the end of the list, so that when you click on the link it will send request to the same action with parameter as next page number.<br /><br /></div><div class="blogger-post-footer"><img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/7585462888260154580-181654713318333354?l=abhionrails.blogspot.com' alt='' /></div>
<div class="share-this">
<span  class='st_email_hcount' displayText='Email' st_url="http://abhidsm.github.com/performance/multiple/page/will_paginate/rails/pagination/2011/02/04/Pagination/" st_title="Pagination"></span>
<span  class='st_twitter_hcount' displayText='Tweet' st_url="http://abhidsm.github.com/performance/multiple/page/will_paginate/rails/pagination/2011/02/04/Pagination/" st_title="Pagination #abhidsm"></span>
<span  class='st_facebook_hcount' displayText='Facebook' st_url="http://abhidsm.github.com/performance/multiple/page/will_paginate/rails/pagination/2011/02/04/Pagination/" st_title="Pagination"></span>
<span  class='st_fblike_hcount' st_url="http://abhidsm.github.com/\/performance/multiple/page/will_paginate/rails/pagination/2011/02/04/Pagination/" st_title="Pagination"></span>
<span  class='st_plusone_hcount' st_url="http://abhidsm.github.com/performance/multiple/page/will_paginate/rails/pagination/2011/02/04/Pagination/" st_title="Pagination"></span>
</div>

<p class="full-post"><a class="small" href="/performance/multiple/page/will_paginate/rails/pagination/2011/02/04/Pagination/#disqus_thread">comments...</a></p>
</article>
<div class="separator">
<image src="/images/blog-post-separator.png" />
</div>

<div class="blog-nav">
  
  <div class="blog-prev">
    
    <a class="small" href="/page2">Newer &gt;&gt;</a>
    
  </div>
  
  
  <div class="blog-next">
    <a class="small" href="/page4">&lt;&lt; Older</a>
  </div>
  
  <hr />
</div>




    
    <div class="footer">
      <div class="contact">
        <p>
          Abhilash M A<br />
        abhidsm@gmail.com
        </p>
      </div>
      <div class="contact">
        <p>
          <a href="http://github.com/abhidsm/">github.com/abhidsm</a><br />
        <a href="http://twitter.com/abhidsm/">twitter.com/abhidsm</a><br />
        </p>
      </div>
      <div class="copy-right">
        Copyright Â© 2011 Abhilash M A. Powered by <a target="_new"
        href="http://github.com/mojombo/jekyll">Jekyll</a>
        and <a target="_new" href="http://github.com">Github</a>.
      </div>
    </div>
  </div>
  <div class="right-section">
    <div class="home margin-top-10"><a href="/">Home</a></div>
    <div class="archive margin-top-10"><a href="/archive">Archive</a></div>
    <div class="about margin-top-10"><a target="_new" href="http://about.me/abhidsm">About</a></div>
    <div class="working-with-rails-badge margin-top-10">
      <a href="http://www.workingwithrails.com/recommendation/new/person/20833-abhilash-m-a"><img alt="Recommend Me" src="http://workingwithrails.com/images/tools/compact-med.jpg" /></a>
    </div>
<!--    <div class="work margin-top-10"> 
      <ul>Working At
        <li><a target="_new" href="http://www.multunus.com">Multunus Software Pvt. Ltd.</a></li>
      </ul>
    </div> -->
    <div class="one-more-blog margin-top-10"> 
      <ul>I have one more blog
        <li><a target="_new" href="http://abhidsm.com">Abhi's Experiments</a></li>
      </ul>
    </div>
    <div class="spare-time-apps margin-top-10"> 
      <ul>My Spare-Time Apps
        <li><a target="_new" href="http://flamesgame.appspot.com">Flames Game</a></li>
        <li><a target="_new" href="http://justchat.nodester.com">Just Chat</a></li>
      </ul>
    </div>
    <div class="friends margin-top-10"> 
      <ul>Blogs of my Friends
        <li><a target="_new" href="http://foobarnbaz.com/">Sreejith K</a></li>
        <li><a target="_new" href="http://manuknkra.wordpress.com/">Manu K Mohan</a></li>
      </ul>
    </div>
    <div class="following margin-top-10"> 
      <ul>I am following the following:
        <li><a target="_new" href="http://news.ycombinator.com/">Hacker News</a></li>
        <li><a target="_new" href="http://techcrunch.com/">Tech Crunch</a></li>
        <li><a target="_new" href="http://www.techmeme.com/">Tech Meme</a></li>
      </ul>
    </div>
  </div>
</div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'abhidsm'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>
